{"meta":{"title":"Topthinking","subtitle":"","description":"学无止境","author":"topthinking","url":"https://topthinking.gitee.io","root":"/"},"pages":[{"title":"分类","date":"2017-11-30T16:00:00.000Z","updated":"2020-10-30T15:36:19.310Z","comments":true,"path":"categories/index.html","permalink":"https://topthinking.gitee.io/categories/index.html","excerpt":"","text":""},{"title":"Tagcloud","date":"2017-04-26T09:47:43.000Z","updated":"2020-10-30T15:38:04.882Z","comments":true,"path":"tags/index.html","permalink":"https://topthinking.gitee.io/tags/index.html","excerpt":"","text":""},{"title":"关于","date":"2020-11-17T15:03:44.926Z","updated":"2020-11-17T15:03:44.926Z","comments":true,"path":"about/index.html","permalink":"https://topthinking.gitee.io/about/index.html","excerpt":"","text":"About Me 程序员 Programming Language: web（html、javaScript、CSS） nodejs php go docker python"}],"posts":[{"title":"dockerfile编写细节","slug":"docker/dockerfile","date":"2020-11-17T14:17:41.419Z","updated":"2020-11-17T15:06:09.103Z","comments":true,"path":"2020/11/17/docker/dockerfile/","link":"","permalink":"https://topthinking.gitee.io/2020/11/17/docker/dockerfile/","excerpt":"","text":"编译 + 部署 通常我们需要在一个指定的目标环境进行代码的编译，比如nodejs12、golang:1.15等环境 那么我们就可以编写 dockerfile 来实现 前提：一个 dockerfile 有且只有一个基础镜像，比如在生产环境运行时，其实不需要大而全的 nodejs 包，只需要一个小而美的即可 12345678910111213141516171819202122232425262728# 使用node:12.19.0镜像编译源代码FROM node:12.19.0 AS buildWORKDIR /codeCOPY . .# 安装依赖，将TS代码编译为ES5代码# 导出到当前目录 distRUN yarnRUN yarn build# 只安装生产环境运行需要的依赖# 比如类似TypeScript、webpack、babel等依赖就不必安装了，减少目标镜像的体积RUN rm -rf node_modulesRUN yarn install --production# 使用最小的node镜像运行node服务FROM node:12.19.0-alpineWORKDIR /code# 拷贝编译后的资源到当前镜像内COPY --from=build /code/dist /code/serverCOPY --from=build /code/node_modules /code/node_modulesCMD [&quot;node&quot;, &quot;server&quot;]","categories":[{"name":"docker","slug":"docker","permalink":"https://topthinking.gitee.io/categories/docker/"}],"tags":[{"name":"编程","slug":"编程","permalink":"https://topthinking.gitee.io/tags/%E7%BC%96%E7%A8%8B/"}]},{"title":"加密技术漫谈","slug":"secret","date":"2020-11-17T14:13:03.469Z","updated":"2020-11-17T14:14:58.101Z","comments":true,"path":"2020/11/17/secret/","link":"","permalink":"https://topthinking.gitee.io/2020/11/17/secret/","excerpt":"","text":"","categories":[{"name":"安全","slug":"安全","permalink":"https://topthinking.gitee.io/categories/%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"编程","slug":"编程","permalink":"https://topthinking.gitee.io/tags/%E7%BC%96%E7%A8%8B/"}]},{"title":"职业闲谈","slug":"top","date":"2020-08-11T15:48:15.296Z","updated":"2020-11-17T15:08:20.930Z","comments":true,"path":"2020/08/11/top/","link":"","permalink":"https://topthinking.gitee.io/2020/08/11/top/","excerpt":"","text":"硬实力 数据结构和算法（leetcode） 设计模式 前端MDN文档 react源码（diff算法、调度算法等） nodejs底层执行逻辑（v8） 云技术（docker，k8s，serverless） 3D技术（VR、AR） webassembly（go、rust等底层语言） 研究面向5G的商用技术 软实力 思考问题的方式，多场景换位思考 商业价值和技术变现 英语","categories":[{"name":"杂谈","slug":"杂谈","permalink":"https://topthinking.gitee.io/categories/%E6%9D%82%E8%B0%88/"}],"tags":[{"name":"职业","slug":"职业","permalink":"https://topthinking.gitee.io/tags/%E8%81%8C%E4%B8%9A/"}]}],"categories":[{"name":"docker","slug":"docker","permalink":"https://topthinking.gitee.io/categories/docker/"},{"name":"安全","slug":"安全","permalink":"https://topthinking.gitee.io/categories/%E5%AE%89%E5%85%A8/"},{"name":"杂谈","slug":"杂谈","permalink":"https://topthinking.gitee.io/categories/%E6%9D%82%E8%B0%88/"}],"tags":[{"name":"编程","slug":"编程","permalink":"https://topthinking.gitee.io/tags/%E7%BC%96%E7%A8%8B/"},{"name":"职业","slug":"职业","permalink":"https://topthinking.gitee.io/tags/%E8%81%8C%E4%B8%9A/"}]}